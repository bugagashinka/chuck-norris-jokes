(this["webpackJsonpchuck-norris-jokes"]=this["webpackJsonpchuck-norris-jokes"]||[]).push([[0],{17:function(e,t,a){e.exports=a.p+"static/media/heart.2cedafc9.svg"},18:function(e,t,a){e.exports=a.p+"static/media/heart-inactive.3369cbd8.svg"},19:function(e,t,a){e.exports=a.p+"static/media/text-icon.71773f6e.svg"},22:function(e,t,a){e.exports=a(35)},34:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"getRandomJoke",(function(){return M})),a.d(r,"getJokeByCategory",(function(){return U})),a.d(r,"searchJoke",(function(){return V})),a.d(r,"getCategories",(function(){return P})),a.d(r,"INTERNET_DISCONNECTED_ERROR",(function(){return D}));var n={};a.r(n),a.d(n,"addFavouriteJokes",(function(){return K})),a.d(n,"getFavouriteJokes",(function(){return Y}));var c={};a.r(c),a.d(c,"intersectionBy",(function(){return Q}));var o,u,i,s=a(0),l=a.n(s),d=a(10),f=a.n(d),m=a(6),p=a.n(m),v=a(3),g=a(4),E=a(1),b="appComponent",h="favListComponent",y="jokesListComponent",_="categoryListComponent",k=(i={},Object(E.a)(i,h,{showOnMobile:!1}),Object(E.a)(i,"error",(o={},Object(E.a)(o,b,null),Object(E.a)(o,h,null),Object(E.a)(o,y,null),Object(E.a)(o,_,null),o)),Object(E.a)(i,"loading",(u={},Object(E.a)(u,h,!1),Object(E.a)(u,y,!1),Object(E.a)(u,_,!0),u)),i),j=function(e,t){switch(t.type){case"uiStateReducer/SET_ERROR":return Object(g.a)(Object(g.a)({},e),{},Object(E.a)({},t.component,t.error));case"uiStateReducer/CLEAR_ERROR":return Object(g.a)(Object(g.a)({},e),{},Object(E.a)({},t.component,null));default:return e}},O=function(e,t){switch(t.type){case"uiStateReducer/TOGGLE_LOADER":return Object(g.a)(Object(g.a)({},e),{},Object(E.a)({},t.component,!e[t.component]));default:return e}},R=function(e,t){switch(t.type){case"uiStateReducer/TOGGLE_FAV_LIST":return Object(g.a)(Object(g.a)({},e),{},{showOnMobile:!e.showOnMobile});default:return e}},N=function(e,t){return{type:"uiStateReducer/SET_ERROR",component:e,error:t}},T=function(e){return{type:"uiStateReducer/TOGGLE_LOADER",component:e}},C=function(){return{type:"uiStateReducer/TOGGLE_FAV_LIST"}},w=Object(v.b)((function(e){return{isButtonVisible:e.uiState[h].showOnMobile}}),{toggleFavList:C})((function(e){var t=e.isButtonVisible,a=e.toggleFavList,r=p()("header__menu-btn","menu-btn button"),n=p()(r,{active:t}),c=l.a.createElement("button",{className:n,onClick:function(){return a()}},"Favourite");return l.a.createElement("header",{className:"header home-page__header"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"header__inner"},l.a.createElement("h1",{className:"header__headline"},"MSI 2020"),c)))})),S=a(21),L=a(2),A=a.n(L),F=a(5),x=a(7),J="https://api.chucknorris.io/jokes/",D="INTERNET_DISCONNECTED_ERROR",I=function(){var e=Object(F.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new Error("".concat(t.status,": Something went wrong, result couln't be provided")),!(t.status>=400&&t.status<=499)){e.next=5;break}return e.next=4,t.json();case 4:a.originError=e.sent;case 5:return e.abrupt("return",Promise.reject(a));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(F.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{headers:{"Accept-Language":"en-US;q=0.8"}});case 3:if((a=e.sent).ok){e.next=6;break}return e.abrupt("return",I(a));case 6:return e.abrupt("return",a.json());case 9:throw e.prev=9,e.t0=e.catch(0),console.error(e.t0),new Error({status:D});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(F.a)(A.a.mark((function e(){var t,a=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"",e.abrupt("return",M(t));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(F.a)(A.a.mark((function e(t){var a,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t?"".concat("?category","=").concat(t):"",e.next=3,G("".concat(J).concat("random/").concat(a));case 3:return r=e.sent,e.abrupt("return",[q(r)]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(F.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G("".concat(J).concat("categories/")));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(F.a)(A.a.mark((function e(t){var a,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t?"".concat("?query","=").concat(t):""){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,G("".concat(J).concat("search/").concat(a));case 5:return r=e.sent,e.abrupt("return",r.result.map(q));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(e){return{categories:e.categories,createdAt:e.created_at,iconUrl:e.icon_url,id:e.id,updatedAt:e.updated_at,url:e.url,value:e.value,loved:!1}},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return localStorage.setItem("FAV_JOKES",B(e))},Y=function(){return B(localStorage.getItem("FAV_JOKES"))||[]},B=function(e){try{return JSON.parse(e)}catch(t){return JSON.stringify(e)}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,r=new Set(e.map((function(e){return e[a]})));return t.filter((function(e){return r.has(e[a])})).map((function(e){return e[a]}))},H="jokesReducer/ADD_JOKES",z="jokesReducer/ADD_FAV_JOKES",W="RANDOM",X="CATEGORY",Z="SEARCH",$={query:"",filterType:W,list:[],favourites:[]},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$.query,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"jokesReducer/UPDATE_QUERY_STRING":return t.payload.value;default:return e}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$.filterType,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"jokesReducer/SET_FILTER_TYPE":return t.payload.value;default:return e}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$.list,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(x.a)(t.payload.value);case"jokesReducer/UPDATE_JOKE_FIELD":var a=t.payload.value,r=a.jokeId,n=a.field,c=a.value;return e.map((function(e){return e.id===r?Object(g.a)(Object(g.a)({},e),{},Object(E.a)({},n,c)):e}));default:return e}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$.favourites,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return[].concat(Object(x.a)(e),Object(x.a)(t.payload.value));case"jokesReducer/REMOVE_FAV_JOKE":return e.filter((function(e){return e.id!==t.payload.value}));default:return e}},ne=function(e){return{type:H,payload:{value:e}}},ce=function(e){return{type:z,payload:{value:e}}},oe=function(e){return{type:"jokesReducer/REMOVE_FAV_JOKE",payload:{value:e}}},ue=function(e,t,a){return{type:"jokesReducer/UPDATE_JOKE_FIELD",payload:{value:{jokeId:e,field:t,value:a}}}},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=n.getFavouriteJokes(),a=new Set(c.intersectionBy(t,e,"id"));return e.map((function(e){return a.has(e.id)&&(e.loved=!0),e}))},se=function(){var e=Object(F.a)(A.a.mark((function e(t,a,n){var c,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(T(y)),e.prev=1,a({type:"uiStateReducer/CLEAR_ERROR",component:y}),e.t0=ie,e.next=6,n(t);case 6:e.t1=e.sent,c=(0,e.t0)(e.t1),a(ne(c)),e.next=17;break;case 11:e.prev=11,e.t2=e.catch(1),a(ne([])),o=y,e.t2.status===r.INTERNET_DISCONNECTED_ERROR&&(o=b),a(N(o,e.t2));case 17:a(T(y));case 18:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a,r){return e.apply(this,arguments)}}(),le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var a=n.getFavouriteJokes(),r=a.some((function(t){return t.id===e.id})),c=[];if(r)c=a.filter((function(t){return t.id!==e.id})),t(oe(e.id));else{var o=Object(g.a)(Object(g.a)({},e),{},{loved:!0});c=[].concat(Object(x.a)(a),[o]),t(ce([o]))}t(ue(e.id,"loved",!r)),n.addFavouriteJokes(c)}},de={categories:[],currentCategory:""},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de.categories,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"categoriesReducer/CREATE_CATEGORY_LIST":return Object(x.a)(t.payload.value);default:return e}},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de.currentCategory,t=arguments.length>1?arguments[1]:void 0;return"categoriesReducer/UPDATE_CURRENT_CATEGORY"===t.type?t.payload.value:e},pe=function(e){return{type:"categoriesReducer/CREATE_CATEGORY_LIST",payload:{value:e}}},ve=function(e){return{type:"categoriesReducer/UPDATE_CURRENT_CATEGORY",payload:{value:e}}},ge=function(e){var t=e.error;if(!t)return null;return function(){var e=t.message,a=t.originError;return a&&a.message&&(e=a.message),l.a.createElement("section",{className:"error-message"},e)}()},Ee=function(){return l.a.createElement("div",{className:"loader"})},be=Object(v.b)((function(e){var t=e.categories;return{categories:t.categories,currentCategory:t.currentCategory,isLoading:e.uiState.loading[_]}}),{initCategories:function(){return function(){var e=Object(F.a)(A.a.mark((function e(t){var a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getCategories();case 2:a=e.sent,t(pe(a)),(n=a.length&&a[0])&&t(ve(n)),t(T(_));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},selectCategory:ve})((function(e){var t=e.show,a=e.isLoading,r=e.categories,n=e.initCategories,c=e.selectCategory,o=e.currentCategory;Object(s.useEffect)((function(){t&&!r.length&&n()}));var u=function(e){return function(){return c(e)}};return l.a.createElement("ul",{className:"category__list"},function(){var e=function(e){return p()({button:!0,"category__tag-btn":!0,active:e===o})},n=r.map((function(t){return l.a.createElement("li",{key:t,className:"category__tag category__list-item"},l.a.createElement("button",{className:e(t),onClick:u(t),type:"button"},t))}));if(t)return a?l.a.createElement(Ee,null):n}())})),he=Object(v.b)((function(e){var t=e.jokes,a=t.query;return{state:{filterType:t.filterType,query:a,jokeList:t.list}}}),{setFilterType:function(e){return{type:"jokesReducer/SET_FILTER_TYPE",payload:{value:e.toUpperCase()}}},updateQueryString:function(e){return{type:"jokesReducer/UPDATE_QUERY_STRING",payload:{value:e}}},toggleJokeLove:le,getJokes:function(e){return function(){var t=Object(F.a)(A.a.mark((function t(a){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.filterType,t.next=t.t0===W?3:t.t0===X?5:t.t0===Z?7:9;break;case 3:return se(null,a,r.getRandomJoke.bind(r)),t.abrupt("break",10);case 5:return se(e.currentCategory,a,r.getJokeByCategory.bind(r)),t.abrupt("break",10);case 7:return se(e.query,a,r.searchJoke.bind(r)),t.abrupt("break",10);case 9:return t.abrupt("break",10);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.state,a=e.getJokes,r=e.updateQueryString,n=e.setFilterType,c=function(e){e.target.checked&&n(e.target.value)},o=[{name:"random",label:"Random"},{name:"category",label:"From caterogies"},{name:"search",label:"Search"}].map((function(e){var a=e.name,r=e.label,n="joke-".concat(a);return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{className:"radio-input form__".concat(a),type:"radio",id:n,name:"search",value:"".concat(a),onChange:c,defaultChecked:t.filterType===a.toUpperCase()}),l.a.createElement("label",{className:"radio-label",htmlFor:n},r))})),u=Object(S.a)(o,3),i=u[0],s=u[1],d=u[2],f=function(e){return e.toUpperCase()===t.filterType},m=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return p.a.apply(void 0,[e].concat(a,["filter-type",{active:f(e)}]))};return l.a.createElement("form",{className:"filter-form form"},l.a.createElement("p",{className:m("random")},i),l.a.createElement("div",{className:m("category")},s,l.a.createElement(be,{show:f("category")})),l.a.createElement("div",{className:m("search")},l.a.createElement("p",null,d),l.a.createElement("input",{className:"form__search-input",onKeyDown:function(e){"Enter"===e.key&&(a(t),e.preventDefault())},onChange:function(e){r(e.target.value)},type:"text",value:t.query,placeholder:"Free text search..."})),l.a.createElement("button",{className:"button form__search-btn",type:"button",onClick:function(){a(t)}},"Get a joke"))})),ye=a(17),_e=a.n(ye),ke=a(18),je=a.n(ke),Oe=a(19),Re=a.n(Oe),Ne=Object(v.b)(null,{toggleJokeLove:le})((function(e){var t,a=e.styleClassPrefix,r=e.data,n=e.toggleJokeLove,c=e.showTag,o=void 0===c||c,u=r||{},i=u.id,s=void 0===i?"":i,d=u.url,f=void 0===d?"":d,m=u.value,p=void 0===m?"":m,v=u.updatedAt,g=void 0===v?"":v,E=u.categories,b=void 0===E?[]:E,h=l.a.createElement("header",{className:"jokecard-header ".concat(a,"__item-header")},l.a.createElement("button",{className:"button pin-btn ".concat(a,"__item-pin"),onClick:function(){n(r)}},l.a.createElement("img",{className:"pin-btn__img",src:r.loved?_e.a:je.a,alt:"heart button"}))),y=l.a.createElement("main",{className:"jokecard-body ".concat(a,"__item-body")},l.a.createElement("div",{className:"jokecard__inner ".concat(a,"__body-inner")},l.a.createElement("div",{className:"jokecard-img ".concat(a,"__item-img"),style:{backgroundImage:"url(".concat(Re.a,")")}}),l.a.createElement("section",{className:"jokecard-desc ".concat(a,"__item-desc")},l.a.createElement("section",{className:"jokecard-id ".concat(a,"__item-id")},l.a.createElement("span",{className:"jokecard-label ".concat(a,"__item-label")},"ID:"),l.a.createElement("a",{href:f,className:"jokecard-id__link ".concat(a,"__item-link")},s)),l.a.createElement("section",{className:"jokecard-text ".concat(a,"__item-text")},p)))),_=b.map((function(e){return l.a.createElement("span",{key:e,className:"jokecard-tag ".concat(a,"__item-tag")},e)})),k=l.a.createElement("footer",{className:"jokecard-footer ".concat(a,"__item-footer")},l.a.createElement("span",{className:"jokecard-updated ".concat(a,"__item-update")},"Last update: ","".concat((t=g,Math.round(((new Date).getTime()-new Date(t).getTime())/36e5))," hours ago")),o&&_);return l.a.createElement("article",{className:"jokecard ".concat(a,"-joke ").concat(a,"__item")},h,y,k)})),Te=Object(v.b)((function(e){return{state:{favourites:e.jokes.favourites,showOnMobile:e.uiState[h].showOnMobile,isLoading:e.uiState.loading[h]}}}),{loadFavouriteJokes:function(){return function(e){e(T(h));var t=n.getFavouriteJokes();e(ce(t)),e(T(h))}},toggleFavList:C})((function(e){var t=e.state,a=e.loadFavouriteJokes,r=e.toggleFavList;Object(s.useEffect)((function(){a()}),[]);var n=function(e){e.stopPropagation(),r()},c=p()("favourite",{active:t.showOnMobile}),o=l.a.createElement("header",{className:"favourite-header"},t.showOnMobile?l.a.createElement("button",{className:"button menu-btn favourite__menu-btn",onClick:n,type:"button"},"Favourite"):l.a.createElement("h3",{className:"favourite-title"},"Favourite"));return l.a.createElement("aside",{className:c,onClick:n},l.a.createElement("section",{className:"favourite-content"},o,l.a.createElement("section",{className:"favourite__list"},function(){var e=t.favourites.reverse().map((function(e){return l.a.createElement(Ne,{key:e.id,styleClassPrefix:"favourite",data:e,showTag:!1})}));return t.isLoading?l.a.createElement(Ee,null):e}())))})),Ce=Object(v.b)((function(e){return{jokes:e.jokes.list,isLoading:e.uiState.loading[y],error:e.uiState.error[y]}}),{})((function(e){var t=e.jokes,a=e.error,r=e.isLoading;return l.a.createElement("section",{className:"filtered"},function(){var e=t.map((function(e){return l.a.createElement(Ne,{key:e.id,styleClassPrefix:"filtered",data:e})}));return l.a.createElement(l.a.Fragment,null,r&&l.a.createElement(Ee,null),l.a.createElement(ge,{error:a}),!(r&&a)&&e)}())})),we=function(){return l.a.createElement("section",{className:"wrapper"},l.a.createElement(w,null),l.a.createElement("section",{className:"content"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"promo"},l.a.createElement("h2",{className:"promo-title"},"Hey!"),l.a.createElement("h3",{className:"promo-subtitle"},"Let\u2019s try to find a joke for you:")),l.a.createElement(he,null),l.a.createElement(Ce,null))),l.a.createElement(Te,null))},Se=(a(34),a(8)),Le=a(20),Ae={jokes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;return{query:ee(e.query,t),filterType:te(e.filterType,t),list:ae(e.list,t),favourites:re(e.favourites,t)}},categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;return{categories:fe(e.categories,t),currentCategory:me(e.currentCategory,t)}},uiState:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,a=arguments.length>1?arguments[1]:void 0;return e={},Object(E.a)(e,h,R(t[h],a)),Object(E.a)(e,"error",j(t.error,a)),Object(E.a)(e,"loading",O(t.loading,a)),e}},Fe=Object(Se.c)(Ae),xe=Object(Se.d)(Fe,Object(Se.a)(Le.a));f.a.render(l.a.createElement(v.a,{store:xe},l.a.createElement(we,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.717be193.chunk.js.map